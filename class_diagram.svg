<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1165px" preserveAspectRatio="none" style="width:1799px;height:1165px;" version="1.1" viewBox="0 0 1799 1165" width="1799px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f2um5w7sfrk1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster tumcsbot--><polygon fill="#FFFFFF" filter="url(#f1f2um5w7sfrk1)" points="22,266,102,266,109,288.2969,524,288.2969,524,410,22,410,22,266" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="109" y1="288.2969" y2="288.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="26" y="280.9951">tumcsbot</text><!--cluster commands.example--><polygon fill="#FFFFFF" filter="url(#f1f2um5w7sfrk1)" points="654,483,816,483,823,505.2969,1385,505.2969,1385,643,654,643,654,483" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="654" x2="823" y1="505.2969" y2="505.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="658" y="497.9951">commands.example</text><!--cluster command--><polygon fill="#FFFFFF" filter="url(#f1f2um5w7sfrk1)" points="661,24,743,24,750,46.2969,1777,46.2969,1777,442,661,442,661,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="661" x2="750" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="665" y="38.9951">command</text><!--cluster lib--><polygon fill="#FFFFFF" filter="url(#f1f2um5w7sfrk1)" points="354,692,378,692,385,714.2969,1707,714.2969,1707,1153,354,1153,354,692" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="354" x2="385" y1="714.2969" y2="714.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="358" y="706.9951">lib</text><!--class tumcsbot.TumCSBot--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="73.6094" id="tumcsbot.TumCSBot" style="stroke: #A80036; stroke-width: 1.5;" width="470" x="38" y="320"/><ellipse cx="237.25" cy="336" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240.2188,341.6406 Q239.6406,341.9375 239,342.0781 Q238.3594,342.2344 237.6563,342.2344 Q235.1563,342.2344 233.8281,340.5938 Q232.5156,338.9375 232.5156,335.8125 Q232.5156,332.6875 233.8281,331.0313 Q235.1563,329.375 237.6563,329.375 Q238.3594,329.375 239,329.5313 Q239.6563,329.6875 240.2188,329.9844 L240.2188,332.7031 Q239.5938,332.125 239,331.8594 Q238.4063,331.5781 237.7813,331.5781 Q236.4375,331.5781 235.75,332.6563 Q235.0625,333.7188 235.0625,335.8125 Q235.0625,337.9063 235.75,338.9844 Q236.4375,340.0469 237.7813,340.0469 Q238.4063,340.0469 239,339.7813 Q239.5938,339.5 240.2188,338.9219 L240.2188,341.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="257.75" y="340.1543">TumCSBot</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="507" y1="352" y2="352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="44" y="366.2104">client: Client</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="507" y1="372.8047" y2="372.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="458" x="44" y="387.0151">__init__(zuliprc: str, db_path: str, debug: bool, logfile: Optional[str], **kwargs: str)</text><!--class commands.example.Command--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="73.6094" id="commands.example.Command" style="stroke: #A80036; stroke-width: 1.5;" width="663" x="697.5" y="545"/><ellipse cx="993.75" cy="561" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M996.7188,566.6406 Q996.1406,566.9375 995.5,567.0781 Q994.8594,567.2344 994.1563,567.2344 Q991.6563,567.2344 990.3281,565.5938 Q989.0156,563.9375 989.0156,560.8125 Q989.0156,557.6875 990.3281,556.0313 Q991.6563,554.375 994.1563,554.375 Q994.8594,554.375 995.5,554.5313 Q996.1563,554.6875 996.7188,554.9844 L996.7188,557.7031 Q996.0938,557.125 995.5,556.8594 Q994.9063,556.5781 994.2813,556.5781 Q992.9375,556.5781 992.25,557.6563 Q991.5625,558.7188 991.5625,560.8125 Q991.5625,562.9063 992.25,563.9844 Q992.9375,565.0469 994.2813,565.0469 Q994.9063,565.0469 995.5,564.7813 Q996.0938,564.5 996.7188,563.9219 L996.7188,566.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="1014.25" y="565.1543">Command</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="698.5" x2="1359.5" y1="577" y2="577"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="698.5" x2="1359.5" y1="585" y2="585"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="703.5" y="599.2104">__init__(**kwargs)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="651" x="703.5" y="612.0151">handle_message(client: Client, message: Dict[str, Any], **kwargs: Any): Union[lib.Response, Iterable[lib.Response]]</text><!--class command.CommandInteractive--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="137.6328" id="command.CommandInteractive" style="stroke: #A80036; stroke-width: 1.5;" width="662" x="924" y="288"/><ellipse cx="1189.75" cy="304" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1189.8594,299.3438 L1188.7031,304.4219 L1191.0313,304.4219 L1189.8594,299.3438 Z M1188.375,297.1094 L1191.3594,297.1094 L1194.7188,309.5 L1192.2656,309.5 L1191.5,306.4375 L1188.2188,306.4375 L1187.4688,309.5 L1185.0313,309.5 L1188.375,297.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="1210.25" y="308.1543">CommandInteractive</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="925" x2="1585" y1="320" y2="320"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="60" x="930" y="334.2104">syntax: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="930" x2="990" y1="336.2104" y2="336.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="86" x="930" y="347.0151">description: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="930" x2="1016" y1="349.0151" y2="349.0151"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="925" x2="1585" y1="353.6094" y2="353.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="101" x="930" y="367.8198">__init__(**kwargs)</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="650" x="930" y="380.6245">handle_message(client: Client,  message: Dict[str, Any], **kwargs: Any): Union[lib.Response, Iterable[lib.Response]]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="529" x="930" y="393.4292">func(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="930" y="406.2339">get_usage(): Tuple[str, str]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="930" y="419.0386">is_responsible(event: Dict[str, Any]): bool</text><!--class command.Command--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="124.8281" id="command.Command" style="stroke: #A80036; stroke-width: 1.5;" width="540" x="985" y="78"/><ellipse cx="1221.25" cy="94" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1221.3594,89.3438 L1220.2031,94.4219 L1222.5313,94.4219 L1221.3594,89.3438 Z M1219.875,87.1094 L1222.8594,87.1094 L1226.2188,99.5 L1223.7656,99.5 L1223,96.4375 L1219.7188,96.4375 L1218.9688,99.5 L1216.5313,99.5 L1219.875,87.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="1241.75" y="98.1543">Command</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="986" x2="1524" y1="110" y2="110"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="55" x="991" y="124.2104">name: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="991" x2="1046" y1="126.2104" y2="126.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="89" x="991" y="137.0151">events: List[str]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="991" x2="1080" y1="139.0151" y2="139.0151"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="986" x2="1524" y1="143.6094" y2="143.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="101" x="991" y="157.8198">__init__(**kwargs)</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="528" x="991" y="170.6245">func(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="991" y="183.4292">is_responsible(event: Dict[str, Any]): bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="991" y="196.2339">start()</text><!--class command.CommandDaemon--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="124.8281" id="command.CommandDaemon" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="677" y="294.5"/><ellipse cx="725.25" cy="310.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M725.3594,305.8438 L724.2031,310.9219 L726.5313,310.9219 L725.3594,305.8438 Z M723.875,303.6094 L726.8594,303.6094 L730.2188,316 L727.7656,316 L727,312.9375 L723.7188,312.9375 L722.9688,316 L720.5313,316 L723.875,303.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="107" x="745.75" y="314.6543">CommandDaemon</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="678" x2="888" y1="326.5" y2="326.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="683" y="340.7104">client: Client</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="683" y="353.5151">logger: logging.Logger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="678" x2="888" y1="360.1094" y2="360.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="196" x="683" y="374.3198">__init__(zuliprc: str, **kwargs: Any)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="683" y="387.1245">wait_for_event()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="683" y="399.9292">event_callback(event: Dict[str, Any])</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="683" y="412.7339">start()</text><!--class command.CommandOneShot--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="48" id="command.CommandOneShot" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="1621" y="333"/><ellipse cx="1636" cy="349" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1636.1094,344.3438 L1634.9531,349.4219 L1637.2813,349.4219 L1636.1094,344.3438 Z M1634.625,342.1094 L1637.6094,342.1094 L1640.9688,354.5 L1638.5156,354.5 L1637.75,351.4375 L1634.4688,351.4375 L1633.7188,354.5 L1631.2813,354.5 L1634.625,342.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="108" x="1650" y="353.1543">CommandOneShot</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1622" x2="1760" y1="365" y2="365"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1622" x2="1760" y1="373" y2="373"/><!--class lib.StrEnum--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="48" id="lib.StrEnum" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="465.5" y="786"/><ellipse cx="480.5" cy="802" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M484.6094,808 L476.8906,808 L476.8906,795.6094 L484.6094,795.6094 L484.6094,797.7656 L479.3438,797.7656 L479.3438,800.4375 L484.1094,800.4375 L484.1094,802.5938 L479.3438,802.5938 L479.3438,805.8438 L484.6094,805.8438 L484.6094,808 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="494.5" y="806.1543">StrEnum</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="466.5" x2="549.5" y1="818" y2="818"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="466.5" x2="549.5" y1="826" y2="826"/><!--class lib.DB--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="112.0234" id="lib.DB" style="stroke: #A80036; stroke-width: 1.5;" width="405" x="972.5" y="754"/><ellipse cx="1162.25" cy="770" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1165.2188,775.6406 Q1164.6406,775.9375 1164,776.0781 Q1163.3594,776.2344 1162.6563,776.2344 Q1160.1563,776.2344 1158.8281,774.5938 Q1157.5156,772.9375 1157.5156,769.8125 Q1157.5156,766.6875 1158.8281,765.0313 Q1160.1563,763.375 1162.6563,763.375 Q1163.3594,763.375 1164,763.5313 Q1164.6563,763.6875 1165.2188,763.9844 L1165.2188,766.7031 Q1164.5938,766.125 1164,765.8594 Q1163.4063,765.5781 1162.7813,765.5781 Q1161.4375,765.5781 1160.75,766.6563 Q1160.0625,767.7188 1160.0625,769.8125 Q1160.0625,771.9063 1160.75,772.9844 Q1161.4375,774.0469 1162.7813,774.0469 Q1163.4063,774.0469 1164,773.7813 Q1164.5938,773.5 1165.2188,772.9219 L1165.2188,775.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="1182.75" y="774.1543">DB</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="973.5" x2="1376.5" y1="786" y2="786"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="103" x="978.5" y="800.2104">path: Optional[str]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="978.5" x2="1081.5" y1="802.2104" y2="802.2104"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="973.5" x2="1376.5" y1="806.8047" y2="806.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="978.5" y="821.0151">__init__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="978.5" y="833.8198">checkout_table(table: str, schema: str)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="393" x="978.5" y="846.6245">checkout_row(table: str, key_column: str, key: str, default_values: str)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="324" x="978.5" y="859.4292">execute(command: str, commit: bool): List[Tuple[Any, ...]]</text><!--class lib.Helper--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="73.6094" id="lib.Helper" style="stroke: #A80036; stroke-width: 1.5;" width="270" x="1413" y="773"/><ellipse cx="1523.25" cy="789" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1526.2188,794.6406 Q1525.6406,794.9375 1525,795.0781 Q1524.3594,795.2344 1523.6563,795.2344 Q1521.1563,795.2344 1519.8281,793.5938 Q1518.5156,791.9375 1518.5156,788.8125 Q1518.5156,785.6875 1519.8281,784.0313 Q1521.1563,782.375 1523.6563,782.375 Q1524.3594,782.375 1525,782.5313 Q1525.6563,782.6875 1526.2188,782.9844 L1526.2188,785.7031 Q1525.5938,785.125 1525,784.8594 Q1524.4063,784.5781 1523.7813,784.5781 Q1522.4375,784.5781 1521.75,785.6563 Q1521.0625,786.7188 1521.0625,788.8125 Q1521.0625,790.9063 1521.75,791.9844 Q1522.4375,793.0469 1523.7813,793.0469 Q1524.4063,793.0469 1525,792.7813 Q1525.5938,792.5 1526.2188,791.9219 L1526.2188,794.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="1543.75" y="793.1543">Helper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1414" x2="1682" y1="805" y2="805"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1414" x2="1682" y1="813" y2="813"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="128" x="1419" y="827.2104">get_help(user: str): str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1419" x2="1547" y1="829.2104" y2="829.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="258" x="1419" y="840.0151">extend_command_docs(docs: List[Tuple[str]])</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1419" x2="1677" y1="842.0151" y2="842.0151"/><!--class lib.Response--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="201.6563" id="lib.Response" style="stroke: #A80036; stroke-width: 1.5;" width="983" x="699.5" y="927"/><ellipse cx="1155.75" cy="943" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1158.7188,948.6406 Q1158.1406,948.9375 1157.5,949.0781 Q1156.8594,949.2344 1156.1563,949.2344 Q1153.6563,949.2344 1152.3281,947.5938 Q1151.0156,945.9375 1151.0156,942.8125 Q1151.0156,939.6875 1152.3281,938.0313 Q1153.6563,936.375 1156.1563,936.375 Q1156.8594,936.375 1157.5,936.5313 Q1158.1563,936.6875 1158.7188,936.9844 L1158.7188,939.7031 Q1158.0938,939.125 1157.5,938.8594 Q1156.9063,938.5781 1156.2813,938.5781 Q1154.9375,938.5781 1154.25,939.6563 Q1153.5625,940.7188 1153.5625,942.8125 Q1153.5625,944.9063 1154.25,945.9844 Q1154.9375,947.0469 1156.2813,947.0469 Q1156.9063,947.0469 1157.5,946.7813 Q1158.0938,946.5 1158.7188,945.9219 L1158.7188,948.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="1176.25" y="947.1543">Response</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="700.5" x2="1681.5" y1="959" y2="959"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="700.5" x2="1681.5" y1="967" y2="967"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="705.5" y="981.2104">__init__(message_type: MessageType, response: Dict[str, Any])</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="705.5" y="994.0151">is_none(): bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="971" x="705.5" y="1006.8198">build_message(message: Optional[Dict[str, Any]], content: str, msg_type: Optional[str] = None, to: Optional[Union[str, int]] = None, subject: Optional[str] = None): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="1676.5" y1="1008.8198" y2="1008.8198"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="343" x="705.5" y="1019.6245">build_reaction(message: Dict[str, Any], emoji: str): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="1048.5" y1="1021.6245" y2="1021.6245"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="261" x="705.5" y="1032.4292">admin_err(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="966.5" y1="1034.4292" y2="1034.4292"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="321" x="705.5" y="1045.2339">command_not_found(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="1026.5" y1="1047.2339" y2="1047.2339"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="232" x="705.5" y="1058.0386">error(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="937.5" y1="1060.0386" y2="1060.0386"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="257" x="705.5" y="1070.8433">exception(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="962.5" y1="1072.8433" y2="1072.8433"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="233" x="705.5" y="1083.6479">greet(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="938.5" y1="1085.6479" y2="1085.6479"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="216" x="705.5" y="1096.4526">ok(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="921.5" y1="1098.4526" y2="1098.4526"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="217" x="705.5" y="1109.2573">no(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="922.5" y1="1111.2573" y2="1111.2573"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="99" x="705.5" y="1122.062">none(): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="705.5" x2="804.5" y1="1124.062" y2="1124.062"/><!--class lib.Regex--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="73.6094" id="lib.Regex" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="386" y="991"/><ellipse cx="426.2" cy="1007" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M430.3094,1013 L422.5906,1013 L422.5906,1000.6094 L430.3094,1000.6094 L430.3094,1002.7656 L425.0438,1002.7656 L425.0438,1005.4375 L429.8094,1005.4375 L429.8094,1007.5938 L425.0438,1007.5938 L425.0438,1010.8438 L430.3094,1010.8438 L430.3094,1013 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="445.8" y="1011.1543">Regex</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="387" x2="511" y1="1023" y2="1023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="114" x="392" y="1037.2104">OPT_ASTERISKS: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="392" x2="506" y1="1039.2104" y2="1039.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="68" x="392" y="1050.0151">STREAM: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="392" x2="460" y1="1052.0151" y2="1052.0151"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="387" x2="511" y1="1056.6094" y2="1056.6094"/><!--class lib.MessageType--><rect fill="#FEFECE" filter="url(#f1f2um5w7sfrk1)" height="86.4141" id="lib.MessageType" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="547.5" y="985"/><ellipse cx="562.5" cy="1001" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M566.6094,1007 L558.8906,1007 L558.8906,994.6094 L566.6094,994.6094 L566.6094,996.7656 L561.3438,996.7656 L561.3438,999.4375 L566.1094,999.4375 L566.1094,1001.5938 L561.3438,1001.5938 L561.3438,1004.8438 L566.6094,1004.8438 L566.6094,1007 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="576.5" y="1005.1543">MessageType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="548.5" x2="663.5" y1="1017" y2="1017"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="78" x="553.5" y="1031.2104">MESSAGE: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="553.5" x2="631.5" y1="1033.2104" y2="1033.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="54" x="553.5" y="1044.0151">EMOJI: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="553.5" x2="607.5" y1="1046.0151" y2="1046.0151"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="55" x="553.5" y="1056.8198">NONE: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="553.5" x2="608.5" y1="1058.8198" y2="1058.8198"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="548.5" x2="663.5" y1="1063.4141" y2="1063.4141"/><!--link command.CommandInteractive to commands.example.Command--><path d="M1171.69,440.21 C1135.14,476.27 1094.13,516.73 1065.49,544.99 " fill="none" id="command.CommandInteractive-commands.example.Command" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1166.81,435.18,1185.96,426.12,1176.64,445.15,1166.81,435.18" style="stroke: #A80036; stroke-width: 1.0;"/><!--link command.Command to command.CommandDaemon--><path d="M1014.05,209.99 C977.29,223.88 940.48,239.89 907,258 C888.3,268.12 869.55,281.09 852.51,294.27 " fill="none" id="command.Command-command.CommandDaemon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1011.76,203.37,1032.95,203.02,1016.6,216.51,1011.76,203.37" style="stroke: #A80036; stroke-width: 1.0;"/><!--link command.Command to command.CommandOneShot--><path d="M1513.78,210.64 C1545.38,224.01 1576.26,239.69 1604,258 C1634,277.8 1660.11,310.49 1675.7,332.62 " fill="none" id="command.Command-command.CommandOneShot" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1510.99,217.07,1495.1,203.04,1516.27,204.1,1510.99,217.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--link command.Command to command.CommandInteractive--><path d="M1255,223.51 C1255,244.78 1255,267.45 1255,287.92 " fill="none" id="command.Command-command.CommandInteractive" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1248,223.25,1255,203.25,1262,223.25,1248,223.25" style="stroke: #A80036; stroke-width: 1.0;"/><!--link lib.StrEnum to lib.Regex--><path d="M496.36,853.61 C485.42,893.68 469.22,952.99 458.89,990.81 " fill="none" id="lib.StrEnum-lib.Regex" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="489.66,851.56,501.69,834.12,503.17,855.25,489.66,851.56" style="stroke: #A80036; stroke-width: 1.0;"/><!--link lib.StrEnum to lib.MessageType--><path d="M526.79,852.42 C544.05,890.45 569.5,946.55 586.86,984.82 " fill="none" id="lib.StrEnum-lib.MessageType" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="520.38,855.22,518.49,834.12,533.13,849.44,520.38,855.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--link tumcsbot.TumCSBot to command.CommandDaemon--><path d="M521.38,357 C576.17,357 631.36,357 676.83,357 " fill="none" id="tumcsbot.TumCSBot-command.CommandDaemon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="508.22,357,514.22,361,520.22,357,514.22,353,508.22,357" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="526.5" y="350.0669">commands_daemon</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="662.1188" y="353.5503">*</text><!--link tumcsbot.TumCSBot to command.CommandInteractive--><path d="M365.19,314.86 C421.35,291.53 495.3,264.91 564,253 C600.71,246.64 906.79,257.97 907,258 C952.02,264.87 999.45,275.79 1044.32,287.91 " fill="none" id="tumcsbot.TumCSBot-command.CommandInteractive" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="353.13,319.93,360.2123,321.2871,364.1889,315.2715,357.1066,313.9145,353.13,319.93" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="565" y="246.0669">commands_interactive</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="1015.2327" y="277.1043">*</text><!--link tumcsbot.TumCSBot to command.CommandOneShot--><path d="M404.58,316.25 C479.06,295.01 574.38,270.84 661,258 C952.07,214.87 1591.33,252.21 1604,258 C1637.72,273.4 1663.6,308.96 1678.06,332.99 " fill="none" id="tumcsbot.TumCSBot-command.CommandOneShot" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="391.87,319.91,398.7427,322.0933,403.4013,316.589,396.5286,314.4057,391.87,319.91" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="774.5" y="246.0669">commands_oneshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="1666.8473" y="321.9995">*</text><!--link tumcsbot.TumCSBot to lib--><path d="M280.13,394.14 C290.61,447.235 310.84,549.75 328.5675,639.5838 C337.4313,684.5006 345.6694,726.2472 351.7503,757.0608 C352.5104,760.9125 353.2368,764.5934 353.9266,768.0882 " fill="none" id="tumcsbot.TumCSBot-lib" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="353.9266,768.0882,356.1083,758.4841,352.9585,763.1828,348.2597,760.033,353.9266,768.0882" style="stroke: #A80036; stroke-width: 1.0;"/><!--link commands.example to lib--><path d="M653.6508,582.6132 C653.4777,582.6074 653.3021,582.6016 653.124,582.5959 C652.4116,582.5728 651.6597,582.5504 650.8694,582.5289 C644.5471,582.3576 635.7695,582.2533 625.157,582.4703 C603.9322,582.9044 575.3681,584.6238 544.4287,589.6625 C482.55,599.74 411.17,623.095 370,676 C352.1,699.005 349.8825,731.5825 352.2463,758.7375 C352.5417,762.1319 352.9088,765.4415 353.3257,768.6372 C353.5342,770.235 353.7551,771.8043 353.9859,773.3414 " fill="none" id="commands.example-lib" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="353.9859,773.3414,356.6057,763.8474,353.2437,768.3968,348.6943,765.0349,353.9859,773.3414" style="stroke: #A80036; stroke-width: 1.0;"/><!--link lib.DB to lib.Helper--><!--link lib.DB to lib.Response--><!--
@startuml

class tumcsbot.TumCSBot {
client: Client
__init__(zuliprc: str, db_path: str, debug: bool, logfile: Optional[str], **kwargs: str)
}

class commands.example.Command extends command.CommandInteractive {
__init__(**kwargs)
handle_message(client: Client, message: Dict[str, Any], **kwargs: Any): Union[lib.Response, Iterable[lib.Response]]
}

abstract class command.Command {
{static} name: str
{static} events: List[str]
{abstract} __init__(**kwargs)
{abstract} func(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]
is_responsible(event: Dict[str, Any]): bool
start()
}

abstract class command.CommandDaemon extends command.Command {
client: Client
logger: logging.Logger
{abstract} __init__(zuliprc: str, **kwargs: Any)
wait_for_event()
event_callback(event: Dict[str, Any])
start()
}

abstract class command.CommandOneShot extends command.Command {
}

abstract class command.CommandInteractive extends command.Command {
{static} syntax: str
{static} description: str
{abstract} __init__(**kwargs)
{abstract} handle_message(client: Client,  message: Dict[str, Any], **kwargs: Any): Union[lib.Response, Iterable[lib.Response]]
func(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]
get_usage(): Tuple[str, str]
is_responsible(event: Dict[str, Any]): bool
}

enum lib.StrEnum

class lib.DB {
{static} path: Optional[str]
__init__()
checkout_table(table: str, schema: str)
checkout_row(table: str, key_column: str, key: str, default_values: str)
execute(command: str, commit: bool): List[Tuple[Any, ...]]
}

class lib.Helper {
{static} get_help(user: str): str
{static} extend_command_docs(docs: List[Tuple[str]])
}

class lib.Response {
__init__(message_type: MessageType, response: Dict[str, Any])
is_none(): bool
{static} build_message(message: Optional[Dict[str, Any]], content: str, msg_type: Optional[str] = None, to: Optional[Union[str, int]] = None, subject: Optional[str] = None): Response
{static} build_reaction(message: Dict[str, Any], emoji: str): Response
{static} admin_err(message: Dict[str, Any]): Response
{static} command_not_found(message: Dict[str, Any]): Response
{static} error(message: Dict[str, Any]): Response
{static} exception(message: Dict[str, Any]): Response
{static} greet(message: Dict[str, Any]): Response
{static} ok(message: Dict[str, Any]): Response
{static} no(message: Dict[str, Any]): Response
{static} none(): Response
}

enum lib.Regex extends lib.StrEnum {
{static} OPT_ASTERISKS: str
{static} STREAM: str
}

enum lib.MessageType extends lib.StrEnum {
{static} MESSAGE: str
{static} EMOJI: str
{static} NONE: str
}

tumcsbot.TumCSBot o- "*" command.CommandDaemon : commands_daemon
tumcsbot.TumCSBot o- "*" command.CommandInteractive : commands_interactive
tumcsbot.TumCSBot o- "*" command.CommandOneShot : commands_oneshot
tumcsbot.TumCSBot -down-> lib
commands.example -down-> lib

@enduml

PlantUML version 1.2019.01(Sat Feb 09 16:32:04 CET 2019)
(LGPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 15.0.1+9
Operating System: Linux
OS Version: 5.9.15-200.fc33.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>