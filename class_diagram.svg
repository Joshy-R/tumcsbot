<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="686px" preserveAspectRatio="none" style="width:3494px;height:686px;" version="1.1" viewBox="0 0 3494 686" width="3494px" zoomAndPan="magnify"><defs><filter height="300%" id="fjzlv1r6w2gj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster tumcsbot--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="22,37,102,37,109,59.2969,524,59.2969,524,187,22,187,22,37" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="109" y1="59.2969" y2="59.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="26" y="51.9951">tumcsbot</text><!--cluster plugin_manager--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="631,49.5,761,49.5,768,71.7969,975,71.7969,975,174.5,631,174.5,631,49.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="631" x2="768" y1="71.7969" y2="71.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="635" y="64.4951">plugin_manager</text><!--cluster plugin--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="2215,24,2269,24,2276,46.2969,3472,46.2969,3472,417.5,2215,417.5,2215,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2215" x2="2276" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="2219" y="38.9951">plugin</text><!--cluster plugins--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="2904,508,2967,508,2974,530.2969,3330,530.2969,3330,674,2904,674,2904,508" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2904" x2="2974" y1="530.2969" y2="530.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="2908" y="522.9951">plugins</text><!--cluster example1--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="3196,551,3278,551,3285,573.2969,3306,573.2969,3306,650,3196,650,3196,551" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="3196" x2="3285" y1="573.2969" y2="573.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="3200" y="565.9951">example1</text><!--cluster example2--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="2928,551,3010,551,3017,573.2969,3038,573.2969,3038,650,2928,650,2928,551" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2928" x2="3017" y1="573.2969" y2="573.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2932" y="565.9951">example2</text><!--cluster example3--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="3062,551,3144,551,3151,573.2969,3172,573.2969,3172,650,3062,650,3062,551" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="3062" x2="3151" y1="573.2969" y2="573.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="3066" y="565.9951">example3</text><!--cluster lib--><polygon fill="#FFFFFF" filter="url(#fjzlv1r6w2gj)" points="999,30.5,1023,30.5,1030,52.7969,2191,52.7969,2191,475,999,475,999,30.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="999" x2="1030" y1="52.7969" y2="52.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1003" y="45.4951">lib</text><!--class tumcsbot.TumCSBot--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="99.2188" id="tumcsbot.TumCSBot" style="stroke: #A80036; stroke-width: 1.5;" width="470" x="38" y="72"/><ellipse cx="237.25" cy="88" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240.2188,93.6406 Q239.6406,93.9375 239,94.0781 Q238.3594,94.2344 237.6563,94.2344 Q235.1563,94.2344 233.8281,92.5938 Q232.5156,90.9375 232.5156,87.8125 Q232.5156,84.6875 233.8281,83.0313 Q235.1563,81.375 237.6563,81.375 Q238.3594,81.375 239,81.5313 Q239.6563,81.6875 240.2188,81.9844 L240.2188,84.7031 Q239.5938,84.125 239,83.8594 Q238.4063,83.5781 237.7813,83.5781 Q236.4375,83.5781 235.75,84.6563 Q235.0625,85.7188 235.0625,87.8125 Q235.0625,89.9063 235.75,90.9844 Q236.4375,92.0469 237.7813,92.0469 Q238.4063,92.0469 239,91.7813 Q239.5938,91.5 240.2188,90.9219 L240.2188,93.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="257.75" y="92.1543">TumCSBot</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="507" y1="104" y2="104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="44" y="118.2104">client: Client</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="507" y1="124.8047" y2="124.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="458" x="44" y="139.0151">__init__(zuliprc: str, db_path: str, debug: bool, logfile: Optional[str], **kwargs: str)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="44" y="151.8198">exit_handler()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="44" y="164.6245">run()</text><!--class plugin_manager.PluginManager--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="73.6094" id="plugin_manager.PluginManager" style="stroke: #A80036; stroke-width: 1.5;" width="311" x="647.5" y="84.5"/><ellipse cx="752.25" cy="100.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M755.2188,106.1406 Q754.6406,106.4375 754,106.5781 Q753.3594,106.7344 752.6563,106.7344 Q750.1563,106.7344 748.8281,105.0938 Q747.5156,103.4375 747.5156,100.3125 Q747.5156,97.1875 748.8281,95.5313 Q750.1563,93.875 752.6563,93.875 Q753.3594,93.875 754,94.0313 Q754.6563,94.1875 755.2188,94.4844 L755.2188,97.2031 Q754.5938,96.625 754,96.3594 Q753.4063,96.0781 752.7813,96.0781 Q751.4375,96.0781 750.75,97.1563 Q750.0625,98.2188 750.0625,100.3125 Q750.0625,102.4063 750.75,103.4844 Q751.4375,104.5469 752.7813,104.5469 Q753.4063,104.5469 754,104.2813 Q754.5938,104 755.2188,103.4219 L755.2188,106.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="772.75" y="104.6543">PluginManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="648.5" x2="957.5" y1="116.5" y2="116.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="648.5" x2="957.5" y1="124.5" y2="124.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="237" x="653.5" y="138.7104">__init__(plugin_classes: List[Type[Plugin]])</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="299" x="653.5" y="151.5151">instantiate(plugin_context: PluginContext, *args: Any)</text><!--class plugin.Plugin--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="124.8281" id="plugin.Plugin" style="stroke: #A80036; stroke-width: 1.5;" width="592" x="2864" y="59"/><ellipse cx="3137.75" cy="75" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3137.8594,70.3438 L3136.7031,75.4219 L3139.0313,75.4219 L3137.8594,70.3438 Z M3136.375,68.1094 L3139.3594,68.1094 L3142.7188,80.5 L3140.2656,80.5 L3139.5,77.4375 L3136.2188,77.4375 L3135.4688,80.5 L3133.0313,80.5 L3136.375,68.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="36" x="3158.25" y="79.1543">Plugin</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2865" x2="3455" y1="91" y2="91"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="95" x="2870" y="105.2104">plugin_name: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="2870" x2="2965" y1="107.2104" y2="107.2104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="89" x="2870" y="118.0151">events: List[str]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="2870" x2="2959" y1="120.0151" y2="120.0151"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2865" x2="3455" y1="124.6094" y2="124.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="274" x="2870" y="138.8198">__init__(plugin_context: PluginContext, **kwargs)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="228" x="2870" y="151.6245">event_callback(self, event: Dict[str, Any])</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="580" x="2870" y="164.4292">handle_event(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="2870" y="177.2339">is_responsible(event: Dict[str, Any]): bool</text><!--class plugin.PluginContext--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="99.2188" id="plugin.PluginContext" style="stroke: #A80036; stroke-width: 1.5;" width="598" x="2231" y="72"/><ellipse cx="2482.75" cy="88" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2485.7188,93.6406 Q2485.1406,93.9375 2484.5,94.0781 Q2483.8594,94.2344 2483.1563,94.2344 Q2480.6563,94.2344 2479.3281,92.5938 Q2478.0156,90.9375 2478.0156,87.8125 Q2478.0156,84.6875 2479.3281,83.0313 Q2480.6563,81.375 2483.1563,81.375 Q2483.8594,81.375 2484.5,81.5313 Q2485.1563,81.6875 2485.7188,81.9844 L2485.7188,84.7031 Q2485.0938,84.125 2484.5,83.8594 Q2483.9063,83.5781 2483.2813,83.5781 Q2481.9375,83.5781 2481.25,84.6563 Q2480.5625,85.7188 2480.5625,87.8125 Q2480.5625,89.9063 2481.25,90.9844 Q2481.9375,92.0469 2483.2813,92.0469 Q2483.9063,92.0469 2484.5,91.7813 Q2485.0938,91.5 2485.7188,90.9219 L2485.7188,93.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="2503.25" y="92.1543">PluginContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2232" x2="2828" y1="104" y2="104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="2237" y="118.2104">client: Client</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="2237" y="131.0151">zuliprc: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="308" x="2237" y="143.8198">command_plugin_classes: List[Type[CommandPlugin]]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2232" x2="2828" y1="150.4141" y2="150.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="586" x="2237" y="164.6245">__init__(client: Client, zuliprc: str, command_plugin_classes: List[Type[CommandPlugin]], **kwargs: Any)</text><!--class plugin.CommandPlugin--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="99.2188" id="plugin.CommandPlugin" style="stroke: #A80036; stroke-width: 1.5;" width="549" x="2537.5" y="302.5"/><ellipse cx="2760.25" cy="318.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2760.3594,313.8438 L2759.2031,318.9219 L2761.5313,318.9219 L2760.3594,313.8438 Z M2758.875,311.6094 L2761.8594,311.6094 L2765.2188,324 L2762.7656,324 L2762,320.9375 L2758.7188,320.9375 L2757.9688,324 L2755.5313,324 L2758.875,311.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="2780.75" y="322.6543">CommandPlugin</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2538.5" x2="3085.5" y1="334.5" y2="334.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="60" x="2543.5" y="348.7104">syntax: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="2543.5" x2="2603.5" y1="350.7104" y2="350.7104"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="86" x="2543.5" y="361.5151">description: str</text><line style="stroke: #000000; stroke-width: 1.0;" x1="2543.5" x2="2629.5" y1="363.5151" y2="363.5151"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2538.5" x2="3085.5" y1="368.1094" y2="368.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="537" x="2543.5" y="382.3198">handle_message(message: Dict[str, Any], **kwargs: Any): Union[Response, Iterable[Response]]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="2543.5" y="395.1245">get_usage(): Tuple[str, str]</text><!--class plugin.SubBot--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="48" id="plugin.SubBot" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="3122" y="328"/><ellipse cx="3137" cy="344" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3137.1094,339.3438 L3135.9531,344.4219 L3138.2813,344.4219 L3137.1094,339.3438 Z M3135.625,337.1094 L3138.6094,337.1094 L3141.9688,349.5 L3139.5156,349.5 L3138.75,346.4375 L3135.4688,346.4375 L3134.7188,349.5 L3132.2813,349.5 L3135.625,337.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="44" x="3151" y="348.1543">SubBot</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3123" x2="3197" y1="360" y2="360"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3123" x2="3197" y1="368" y2="368"/><!--class example1.Plugin1--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="48" id="example1.Plugin1" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="3212" y="586"/><ellipse cx="3227" cy="602" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3229.9688,607.6406 Q3229.3906,607.9375 3228.75,608.0781 Q3228.1094,608.2344 3227.4063,608.2344 Q3224.9063,608.2344 3223.5781,606.5938 Q3222.2656,604.9375 3222.2656,601.8125 Q3222.2656,598.6875 3223.5781,597.0313 Q3224.9063,595.375 3227.4063,595.375 Q3228.1094,595.375 3228.75,595.5313 Q3229.4063,595.6875 3229.9688,595.9844 L3229.9688,598.7031 Q3229.3438,598.125 3228.75,597.8594 Q3228.1563,597.5781 3227.5313,597.5781 Q3226.1875,597.5781 3225.5,598.6563 Q3224.8125,599.7188 3224.8125,601.8125 Q3224.8125,603.9063 3225.5,604.9844 Q3226.1875,606.0469 3227.5313,606.0469 Q3228.1563,606.0469 3228.75,605.7813 Q3229.3438,605.5 3229.9688,604.9219 L3229.9688,607.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="3241" y="606.1543">Plugin1</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3213" x2="3289" y1="618" y2="618"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3213" x2="3289" y1="626" y2="626"/><!--class example2.Plugin2--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="48" id="example2.Plugin2" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="2944" y="586"/><ellipse cx="2959" cy="602" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2961.9688,607.6406 Q2961.3906,607.9375 2960.75,608.0781 Q2960.1094,608.2344 2959.4063,608.2344 Q2956.9063,608.2344 2955.5781,606.5938 Q2954.2656,604.9375 2954.2656,601.8125 Q2954.2656,598.6875 2955.5781,597.0313 Q2956.9063,595.375 2959.4063,595.375 Q2960.1094,595.375 2960.75,595.5313 Q2961.4063,595.6875 2961.9688,595.9844 L2961.9688,598.7031 Q2961.3438,598.125 2960.75,597.8594 Q2960.1563,597.5781 2959.5313,597.5781 Q2958.1875,597.5781 2957.5,598.6563 Q2956.8125,599.7188 2956.8125,601.8125 Q2956.8125,603.9063 2957.5,604.9844 Q2958.1875,606.0469 2959.5313,606.0469 Q2960.1563,606.0469 2960.75,605.7813 Q2961.3438,605.5 2961.9688,604.9219 L2961.9688,607.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="2973" y="606.1543">Plugin2</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2945" x2="3021" y1="618" y2="618"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2945" x2="3021" y1="626" y2="626"/><!--class example3.Plugin3--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="48" id="example3.Plugin3" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="3078" y="586"/><ellipse cx="3093" cy="602" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3095.9688,607.6406 Q3095.3906,607.9375 3094.75,608.0781 Q3094.1094,608.2344 3093.4063,608.2344 Q3090.9063,608.2344 3089.5781,606.5938 Q3088.2656,604.9375 3088.2656,601.8125 Q3088.2656,598.6875 3089.5781,597.0313 Q3090.9063,595.375 3093.4063,595.375 Q3094.1094,595.375 3094.75,595.5313 Q3095.4063,595.6875 3095.9688,595.9844 L3095.9688,598.7031 Q3095.3438,598.125 3094.75,597.8594 Q3094.1563,597.5781 3093.5313,597.5781 Q3092.1875,597.5781 3091.5,598.6563 Q3090.8125,599.7188 3090.8125,601.8125 Q3090.8125,603.9063 3091.5,604.9844 Q3092.1875,606.0469 3093.5313,606.0469 Q3094.1563,606.0469 3094.75,605.7813 Q3095.3438,605.5 3095.9688,604.9219 L3095.9688,607.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="46" x="3107" y="606.1543">Plugin3</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3079" x2="3155" y1="618" y2="618"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3079" x2="3155" y1="626" y2="626"/><!--class lib.CommandParser--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="86.4141" id="lib.CommandParser" style="stroke: #A80036; stroke-width: 1.5;" width="719" x="1015.5" y="78.5"/><ellipse cx="1319.25" cy="94.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1322.2188,100.1406 Q1321.6406,100.4375 1321,100.5781 Q1320.3594,100.7344 1319.6563,100.7344 Q1317.1563,100.7344 1315.8281,99.0938 Q1314.5156,97.4375 1314.5156,94.3125 Q1314.5156,91.1875 1315.8281,89.5313 Q1317.1563,87.875 1319.6563,87.875 Q1320.3594,87.875 1321,88.0313 Q1321.6563,88.1875 1322.2188,88.4844 L1322.2188,91.2031 Q1321.5938,90.625 1321,90.3594 Q1320.4063,90.0781 1319.7813,90.0781 Q1318.4375,90.0781 1317.75,91.1563 Q1317.0625,92.2188 1317.0625,94.3125 Q1317.0625,96.4063 1317.75,97.4844 Q1318.4375,98.5469 1319.7813,98.5469 Q1320.4063,98.5469 1321,98.2813 Q1321.5938,98 1322.2188,97.4219 L1322.2188,100.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="1339.75" y="98.6543">CommandParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1016.5" x2="1733.5" y1="110.5" y2="110.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1016.5" x2="1733.5" y1="118.5" y2="118.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1021.5" y="132.7104">__init__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="707" x="1021.5" y="145.5151">add_subcommand(self, name: str, args: Dict[str, Callable[ [str], Any] ] = {}, greedy: bool = False, optional: bool = False): bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="353" x="1021.5" y="158.3198">parse(self, command: Optional[str]): Optional[Tuple[str, Args]]</text><!--class lib.DB--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="112.0234" id="lib.DB" style="stroke: #A80036; stroke-width: 1.5;" width="405" x="1769.5" y="65.5"/><ellipse cx="1959.25" cy="81.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1962.2188,87.1406 Q1961.6406,87.4375 1961,87.5781 Q1960.3594,87.7344 1959.6563,87.7344 Q1957.1563,87.7344 1955.8281,86.0938 Q1954.5156,84.4375 1954.5156,81.3125 Q1954.5156,78.1875 1955.8281,76.5313 Q1957.1563,74.875 1959.6563,74.875 Q1960.3594,74.875 1961,75.0313 Q1961.6563,75.1875 1962.2188,75.4844 L1962.2188,78.2031 Q1961.5938,77.625 1961,77.3594 Q1960.4063,77.0781 1959.7813,77.0781 Q1958.4375,77.0781 1957.75,78.1563 Q1957.0625,79.2188 1957.0625,81.3125 Q1957.0625,83.4063 1957.75,84.4844 Q1958.4375,85.5469 1959.7813,85.5469 Q1960.4063,85.5469 1961,85.2813 Q1961.5938,85 1962.2188,84.4219 L1962.2188,87.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="1979.75" y="85.6543">DB</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1770.5" x2="2173.5" y1="97.5" y2="97.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="103" x="1775.5" y="111.7104">path: Optional[str]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1775.5" x2="1878.5" y1="113.7104" y2="113.7104"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1770.5" x2="2173.5" y1="118.3047" y2="118.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1775.5" y="132.5151">__init__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1775.5" y="145.3198">checkout_table(table: str, schema: str)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="393" x="1775.5" y="158.1245">checkout_row(table: str, key_column: str, key: str, default_values: str)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="324" x="1775.5" y="170.9292">execute(command: str, commit: bool): List[Tuple[Any, ...]]</text><!--class lib.Response--><rect fill="#FEFECE" filter="url(#fjzlv1r6w2gj)" height="214.4609" id="lib.Response" style="stroke: #A80036; stroke-width: 1.5;" width="851" x="1015.5" y="245"/><ellipse cx="1405.75" cy="261" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1408.7188,266.6406 Q1408.1406,266.9375 1407.5,267.0781 Q1406.8594,267.2344 1406.1563,267.2344 Q1403.6563,267.2344 1402.3281,265.5938 Q1401.0156,263.9375 1401.0156,260.8125 Q1401.0156,257.6875 1402.3281,256.0313 Q1403.6563,254.375 1406.1563,254.375 Q1406.8594,254.375 1407.5,254.5313 Q1408.1563,254.6875 1408.7188,254.9844 L1408.7188,257.7031 Q1408.0938,257.125 1407.5,256.8594 Q1406.9063,256.5781 1406.2813,256.5781 Q1404.9375,256.5781 1404.25,257.6563 Q1403.5625,258.7188 1403.5625,260.8125 Q1403.5625,262.9063 1404.25,263.9844 Q1404.9375,265.0469 1406.2813,265.0469 Q1406.9063,265.0469 1407.5,264.7813 Q1408.0938,264.5 1408.7188,263.9219 L1408.7188,266.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="1426.25" y="265.1543">Response</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1016.5" x2="1865.5" y1="277" y2="277"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1016.5" x2="1865.5" y1="285" y2="285"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="1021.5" y="299.2104">__init__(message_type: MessageType, response: Dict[str, Any])</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="1021.5" y="312.0151">is_none(): bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="839" x="1021.5" y="324.8198">build_message(message: Optional[Dict[str, Any]], content: str, msg_type: Optional[str], to: Optional[Union[str, int]], subject: Optional[str]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1860.5" y1="326.8198" y2="326.8198"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="343" x="1021.5" y="337.6245">build_reaction(message: Dict[str, Any], emoji: str): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1364.5" y1="339.6245" y2="339.6245"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="350" x="1021.5" y="350.4292">build_reaction_from_id(message_id: int, emoji: str): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1371.5" y1="352.4292" y2="352.4292"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="261" x="1021.5" y="363.2339">admin_err(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1282.5" y1="365.2339" y2="365.2339"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="321" x="1021.5" y="376.0386">command_not_found(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1342.5" y1="378.0386" y2="378.0386"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="232" x="1021.5" y="388.8433">error(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1253.5" y1="390.8433" y2="390.8433"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="257" x="1021.5" y="401.6479">exception(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1278.5" y1="403.6479" y2="403.6479"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="233" x="1021.5" y="414.4526">greet(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1254.5" y1="416.4526" y2="416.4526"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="216" x="1021.5" y="427.2573">ok(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1237.5" y1="429.2573" y2="429.2573"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="217" x="1021.5" y="440.062">no(message: Dict[str, Any]): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1238.5" y1="442.062" y2="442.062"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="99" x="1021.5" y="452.8667">none(): Response</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1021.5" x2="1120.5" y1="454.8667" y2="454.8667"/><!--link plugin.Plugin to plugin.CommandPlugin--><path d="M3049.33,195.17 C2996.01,230.18 2933.51,271.22 2886.03,302.39 " fill="none" id="plugin.Plugin-plugin.CommandPlugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3045.72,189.16,3066.28,184.03,3053.41,200.86,3045.72,189.16" style="stroke: #A80036; stroke-width: 1.0;"/><!--link plugin.Plugin to plugin.SubBot--><path d="M3160,204.25 C3160,248.16 3160,299.05 3160,327.89 " fill="none" id="plugin.Plugin-plugin.SubBot" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3153,204.03,3160,184.03,3167,204.03,3153,204.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--link plugin.Plugin to example1.Plugin1--><path d="M3201.2,202.66 C3206.98,216.49 3212.23,230.95 3216,245 C3249.67,370.39 3251.88,527.73 3251.41,585.96 " fill="none" id="plugin.Plugin-example1.Plugin1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3194.76,205.39,3193.07,184.27,3207.56,199.73,3194.76,205.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--link plugin.CommandPlugin to example2.Plugin2--><path d="M2855.69,418.4 C2892.29,473.2 2942.46,548.3 2967.48,585.77 " fill="none" id="plugin.CommandPlugin-example2.Plugin2" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2849.85,422.27,2844.57,401.75,2861.5,414.5,2849.85,422.27" style="stroke: #A80036; stroke-width: 1.0;"/><!--link plugin.SubBot to example3.Plugin3--><path d="M3152.77,396.04 C3143.6,450.62 3128.12,542.77 3120.91,585.7 " fill="none" id="plugin.SubBot-example3.Plugin3" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3145.89,394.73,3156.11,376.17,3159.7,397.05,3145.89,394.73" style="stroke: #A80036; stroke-width: 1.0;"/><!--link tumcsbot.TumCSBot to plugin_manager.PluginManager--><path d="M521.18,121.5 C564.19,121.5 607.8,121.5 647.44,121.5 " fill="none" id="tumcsbot.TumCSBot-plugin_manager.PluginManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="508.17,121.5,514.17,125.5,520.17,121.5,514.17,117.5,508.17,121.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="526.25" y="114.5669">plugin_manager</text><!--link lib.CommandParser to lib.DB--><!--link lib.CommandParser to lib.Response--><!--
@startuml

class tumcsbot.TumCSBot {
client: Client
__init__(zuliprc: str, db_path: str, debug: bool, logfile: Optional[str], **kwargs: str)
exit_handler()
run()
}

class plugin_manager.PluginManager {
__init__(plugin_classes: List[Type[Plugin]])
instantiate(plugin_context: PluginContext, *args: Any)
}

abstract class plugin.Plugin {
{static} plugin_name: str
{static} events: List[str]
__init__(plugin_context: PluginContext, **kwargs)
event_callback(self, event: Dict[str, Any])
{abstract} handle_event(client: Client, event: Dict[str, Any], **kwargs): Union[lib.Response, Iterable[lib.Response]]
is_responsible(event: Dict[str, Any]): bool
}

class plugin.PluginContext {
client: Client
zuliprc: str
command_plugin_classes: List[Type[CommandPlugin]]
__init__(client: Client, zuliprc: str, command_plugin_classes: List[Type[CommandPlugin]], **kwargs: Any)
}

abstract class plugin.CommandPlugin extends plugin.Plugin {
{static} syntax: str
{static} description: str
{abstract} handle_message(message: Dict[str, Any], **kwargs: Any): Union[Response, Iterable[Response]]
get_usage(): Tuple[str, str]
}

abstract class plugin.SubBot extends plugin.Plugin {
}

package plugins {
package example1 {
class example1.Plugin1 extends plugin.Plugin {
}
}
package example2 {
class example2.Plugin2 extends plugin.CommandPlugin {
}
}
package example3 {
class example3.Plugin3 extends plugin.SubBot {
}
}
}

class lib.CommandParser {
__init__()
add_subcommand(self, name: str, args: Dict[str, Callable[ [str], Any] ] = {}, greedy: bool = False, optional: bool = False): bool
parse(self, command: Optional[str]): Optional[Tuple[str, Args]]
}

class lib.DB {
{static} path: Optional[str]
__init__()
checkout_table(table: str, schema: str)
checkout_row(table: str, key_column: str, key: str, default_values: str)
execute(command: str, commit: bool): List[Tuple[Any, ...]]
}

class lib.Response {
__init__(message_type: MessageType, response: Dict[str, Any])
is_none(): bool
{static} build_message(message: Optional[Dict[str, Any]], content: str, msg_type: Optional[str], to: Optional[Union[str, int]], subject: Optional[str]): Response
{static} build_reaction(message: Dict[str, Any], emoji: str): Response
{static} build_reaction_from_id(message_id: int, emoji: str): Response
{static} admin_err(message: Dict[str, Any]): Response
{static} command_not_found(message: Dict[str, Any]): Response
{static} error(message: Dict[str, Any]): Response
{static} exception(message: Dict[str, Any]): Response
{static} greet(message: Dict[str, Any]): Response
{static} ok(message: Dict[str, Any]): Response
{static} no(message: Dict[str, Any]): Response
{static} none(): Response
}

tumcsbot.TumCSBot o- plugin_manager.PluginManager: plugin_manager

@enduml

PlantUML version 1.2019.01(Sat Feb 09 16:32:04 CET 2019)
(LGPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 15.0.2+7
Operating System: Linux
OS Version: 5.10.23-200.fc33.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>